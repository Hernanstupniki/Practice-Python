ya esta en 1fn

pasando a 2fn:
    isbn - pk

    crear tablas separadas:
        estudiante
            id_estudiante/nombre_estudiante (id_estudiante - pk)
        libro
            isbn/titulo/autor_nombre/autor_nacionalidad/anio_publicacion/editorial/tematica/genero (isbn - pk)
        prestamo
        id_prestamo/isbn/id_estudiante/fecha_prestamo (id_prestamo - pk, isbn - fk, id_estudiante - fk)

Verificar BCNF

Revisamos dependencias funcionales:

isbn â†’ tÃ­tulo, autor, editorial... âœ… el determinante es clave (isbn)

id_estudiante â†’ nombre_estudiante âœ… el determinante es clave

id_prestamo â†’ isbn, id_estudiante, fecha_prestamo âœ… el determinante es clave


---

## ğŸ§© **1. Dependencia funcional**

ğŸ“– **DefiniciÃ³n:**
Existe una **dependencia funcional (DF)** entre dos conjuntos de atributos, si un atributo (o conjunto de ellos) **determina** el valor de otro.

ğŸ§  Se escribe:

```
A â†’ B
```

y significa que **si conozco A, puedo saber B**.

ğŸ“˜ **Ejemplo:**
En una tabla de libros:

```
isbn â†’ tÃ­tulo, autor
```

porque cada `isbn` identifica **un solo** tÃ­tulo y autor.

---

## ğŸ§± **2. Determinante**

ğŸ“– **DefiniciÃ³n:**
El **determinante** es el atributo (o conjunto de atributos) que aparece en el lado izquierdo de una dependencia funcional.

ğŸ“˜ **Ejemplo:**
En `dni â†’ nombre, direcciÃ³n`, el **determinante es `dni`**, porque con Ã©l determino los otros valores.

---

## ğŸ—ï¸ **3. Clave primaria (PK)**

ğŸ“– **DefiniciÃ³n:**
Es el conjunto mÃ­nimo de atributos que **identifica de forma Ãºnica** cada fila en una tabla.
No puede haber dos filas con el mismo valor de PK.

ğŸ“˜ **Ejemplo:**
En la tabla de alumnos:

```
id_estudiante | nombre
1              | Juan
2              | Ana
```

La clave primaria es **id_estudiante**.

---

## ğŸ§© **4. Clave candidata**

ğŸ“– **DefiniciÃ³n:**
Es **una posible clave primaria**: cualquier conjunto mÃ­nimo de atributos que identifica de forma Ãºnica una fila.

ğŸ“˜ **Ejemplo:**
En una tabla de personas:

```
dni | email | nombre
```

Tanto `dni` como `email` podrÃ­an ser **claves candidatas** (cada uno identifica de forma Ãºnica).
ElegÃ­s uno como **clave primaria**, el otro queda como **clave alternativa**.

---

## ğŸ“˜ **5. Primera Forma Normal (1FN)**

ğŸ“– **DefiniciÃ³n:**
Una tabla estÃ¡ en **1FN** cuando **todas las celdas tienen valores atÃ³micos**, es decir, **un solo valor por campo**.

ğŸ“˜ **Ejemplo:**
âŒ No cumple:

| Cliente | TelÃ©fonos        |
| ------- | ---------------- |
| Juan    | 1111, 2222, 3333 |

âœ… Cumple (en 1FN):

| Cliente | TelÃ©fono |
| ------- | -------- |
| Juan    | 1111     |
| Juan    | 2222     |
| Juan    | 3333     |

---

## ğŸ§  **6. Segunda Forma Normal (2FN)**

ğŸ“– **DefiniciÃ³n:**
Una tabla estÃ¡ en **2FN** si:

1. EstÃ¡ en 1FN.
2. **Todos los campos no clave dependen de toda la clave primaria**, no solo de una parte.

ğŸ“˜ **Ejemplo:**
Tabla (clave compuesta):

| id_pedido | id_producto | nombre_cliente | precio_unitario |
| --------- | ----------- | -------------- | --------------- |

ğŸ‘‰ `nombre_cliente` depende solo de `id_pedido`, no de la clave completa (`id_pedido`, `id_producto`).
âŒ No cumple 2FN.

âœ… SoluciÃ³n: separar en:

* **Pedido(id_pedido, nombre_cliente)**
* **Detalle(id_pedido, id_producto, precio_unitario)**

---

## ğŸ§± **7. Tercera Forma Normal (3FN)**

ğŸ“– **DefiniciÃ³n:**
Una tabla estÃ¡ en **3FN** si:

1. EstÃ¡ en 2FN.
2. **No existen dependencias transitivas**, o sea, un campo no clave no depende de otro campo no clave.

ğŸ“˜ **Ejemplo:**

| id_cliente | nombre_cliente | ciudad | cod_postal |
| ---------- | -------------- | ------ | ---------- |

Si `cod_postal â†’ ciudad`, entonces `id_cliente â†’ cod_postal â†’ ciudad`
âŒ Hay dependencia transitiva.

âœ… SoluciÃ³n: separar:

* **Cliente(id_cliente, nombre_cliente, cod_postal)**
* **CodigoPostal(cod_postal, ciudad)**

---

## ğŸ§© **8. Forma Normal Boyce-Codd (BCNF)**

ğŸ“– **DefiniciÃ³n:**
Una tabla estÃ¡ en **BCNF** si:

> Para toda dependencia funcional X â†’ Y,
> el determinante X es una **clave candidata**.

ğŸ‘‰ Es como una versiÃ³n mÃ¡s estricta de 3FN.

ğŸ“˜ **Ejemplo:**

| Profesor | Materia | Aula |
| -------- | ------- | ---- |
| PÃ©rez    | Redes   | 101  |
| GÃ³mez    | BD      | 102  |

Dependencias:

* `Profesor â†’ Materia`
* `Materia â†’ Aula`

âœ… 3FN, pero âŒ no BCNF, porque `Materia` no es clave.
ğŸ’¡ SoluciÃ³n: separar:

* **ProfesorMateria(Profesor, Materia)**
* **MateriaAula(Materia, Aula)**

---

### ğŸ“˜ **DefiniciÃ³n ampliada (segÃºn Boyce-Codd original)**

Una tabla estÃ¡ en **Forma Normal de Boyce-Codd (BCNF)** cuando cumple **ambas condiciones:**

1. ğŸ”¹ **Todas las dependencias funcionales deben tener como determinante una clave candidata.**
   Esto significa que solo las claves pueden determinar otros atributos.

2. ğŸ”¹ **Todas las dependencias funcionales deben ser triviales.**
   Es decir, dependencias del tipo `A â†’ A` o `A â†’ parte de A`,
   que no agregan informaciÃ³n redundante.

ğŸ“˜ **Ejemplo visual (como en la imagen):**

| Profesor | Materia | Aula |
| -------- | ------- | ---- |
| PÃ©rez    | Redes   | 101  |
| GÃ³mez    | BD      | 102  |

Dependencias:

* `Profesor â†’ Materia`
* `Materia â†’ Aula`

ğŸ‘‰ Como `Materia` no es clave, la segunda dependencia **rompe BCNF**.
âœ… SoluciÃ³n: dividir en:

* **ProfesorMateria(Profesor, Materia)**
* **MateriaAula(Materia, Aula)**

ğŸ“š **Resumen:**

> En BCNF, toda dependencia funcional debe provenir de una clave candidata o ser trivial.

---

## ğŸ§® **9. Dependencia parcial**

ğŸ“– **DefiniciÃ³n:**
Ocurre cuando un atributo depende **solo de parte** de una clave compuesta.

ğŸ“˜ **Ejemplo:**
En `(id_pedido, id_producto) â†’ nombre_cliente`,
`nombre_cliente` depende solo de `id_pedido`, no de toda la clave.

ğŸ‘‰ Se elimina en **2FN**.

---

## ğŸ” **10. Dependencia transitiva**

ğŸ“– **DefiniciÃ³n:**
Pasa cuando un atributo no clave depende de otro atributo no clave.
Es una dependencia â€œen cadenaâ€.

ğŸ“˜ **Ejemplo:**

```
dni â†’ cod_postal
cod_postal â†’ ciudad
```

Entonces `dni â†’ ciudad` (por trÃ¡nsito).
ğŸ‘‰ Se elimina en **3FN**.

---

## ğŸ§  **11. Redundancia**

ğŸ“– **DefiniciÃ³n:**
Es cuando el mismo dato se repite varias veces en la base de datos, provocando **anomalÃ­as** (errores al actualizar, insertar o eliminar).

ğŸ“˜ **Ejemplo:**
Si el nombre del autor estÃ¡ en todas las filas de libros del mismo autor, hay redundancia.

---

## âš™ï¸ **12. AnomalÃ­as**

ğŸ“– **DefiniciÃ³n:**
Problemas que aparecen por mala normalizaciÃ³n:

* **InserciÃ³n:** no puedo agregar un autor sin un libro.
* **ActualizaciÃ³n:** cambio el nombre de un autor y tengo que hacerlo en 10 filas.
* **EliminaciÃ³n:** borro el Ãºnico libro de un autor y pierdo su informaciÃ³n.

---

## ğŸ§  **Resumen rÃ¡pido de las formas normales**

| Forma    | QuÃ© elimina                     | CondiciÃ³n principal                  |
| -------- | ------------------------------- | ------------------------------------ |
| **1FN**  | Repeticiones / listas en celdas | Atributos atÃ³micos                   |
| **2FN**  | Dependencias parciales          | Todos dependen de la clave completa  |
| **3FN**  | Dependencias transitivas        | No hay dependencias entre no-claves  |
| **BCNF** | Casos especiales de 3FN         | Todo determinante es clave candidata |

